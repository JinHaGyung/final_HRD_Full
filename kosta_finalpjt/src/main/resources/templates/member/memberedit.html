<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
window.onload = () => {
	if('[[${member?.memberid }]]' != '[[null]]'){
		let memberaddvar = document.getElementById('memberaddid');
		memberaddvar.value = '내정보수정하기';
		document.getElementById('memberidid2').style.display = '';
		document.getElementById('hiredtid').style.display = '';
	}
	console.log(document.getElementById('birthdtid').value);
	
}
// console.log(document.getElementById('leavedtid').value);
console.log('[[${member?.leavedt }]]');

const resetbtn = () => {
	document.getElementById('birthdtid').value = '[[${member?.birthdt }]]';
	document.getElementById('emailid').value = '[[${member?.email }]]';
	document.getElementById('cpnumid').value = '[[${member?.cpnum }]]';
	document.getElementById('addressid').value = '[[${member?.address }]]';
	document.getElementById('memberimgfid').value = '[[${member?.memberimgnm }]]';
	document.getElementById('deptidid').value = '[[${member?.deptid?.deptid }]]';
	document.getElementById('joblvid').value = '[[${member?.joblv }]]';
}

const home = (type) => {
	if (type == 'admin') {
		location.href='/index_admin';
	} else if (type == 'emp') {
		location.href='/index_emp';
	} else {
		location.href='/';
	}
}

</script>
</head>
<body>
<h3>내 정보 수정 페이지</h3>
<form th:action="@{/member/memberadd }" method="post" name="memberf" enctype="multipart/form-data">
<table border="1">
<tr th:if="${member?.memberid != null }" id="memberidid2" style="display:none"><th>사원번호</th><td th:text="${member?.memberid }"></td></tr>
<tr><th>생년월일</th><td><input type="date" name="birthdt" id="birthdtid" th:value="${member?.birthdt }"></td></tr>
<tr><th>이메일</th><td><input type="text" name="email" id="emailid" th:value="${member?.email }"></td></tr>
<tr><th>개인전화번호</th><td><input type="text" name="cpnum" id="cpnumid" th:value="${member?.cpnum }"></td></tr>
<tr><th>주소</th><td><input type="text" name="address" id="addressid" th:value="${member?.address }"></td></tr>
<tr>
<th>사원이미지</th>
<td>
<img th:src="@{/member/memberimg(memberimgnm=${member?.memberimgnm })}" style="width:150px;height:150px"><br/>
<input type="file" name="memberimgf" id="memberimgfid" th:value="${member?.memberimgnm }">
</td>
</tr>
<tr id="hiredtid" style="display:none"><th>입사일</th><td th:text="${member?.hiredt }"></td></tr>
<tr th:if="${member?.userid?.aprov == 3 }" id="leavedtid"><th>퇴사일</th><td th:text="${member?.leavedt }"></td></tr>
<tr><th>부서</th><td><input type="text" name="deptid" id="deptidid" th:value="${member?.deptid?.deptid }"></td></tr>
<tr><th>직급</th><td><input type="number" name="joblv" id="joblvid" th:value="${member?.joblv }"></td></tr>
</table>
<div th:if="${session.loginId == userid } or ${session.type == 'admin' }">
<div th:if="${member?.memberid != null }">
<input type="hidden" id="memberidid1" name="memberid" th:value="${member?.memberid }"><br/>
<input type="hidden" name="memberimgnm" th:value="${member?.memberimgnm }"><br/>
</div>
<input type="hidden" name="userid" th:value="${userid }"><br/>
<input id="memberaddid" type="submit" value="내정보등록하기"><br/>
</div>
</form>
<input type="reset" value="취소하기" th:onclick="resetbtn()"><br/>
<input type="button" value="뒤로가기버튼" onclick="history.back()"><br/>
<input type="button" value="홈버튼" th:onclick="home([[${session.type }]])"><br/>
</body>
</html>