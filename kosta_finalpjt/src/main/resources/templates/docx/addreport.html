<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" th:href="@{/css/common/reset.css}">
    <link rel="stylesheet" th:href="@{/css/common/leftnav.css}">
    <link rel="stylesheet" th:href="@{/css/common/header.css}">
    <link rel="stylesheet" th:href="@{/css/record.css}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script type="text/javascript">
        const home = (type) => {
            if (type == 'admin') {
                location.href = '/index_admin';
            } else if (type == 'emp') {
                location.href = '/index_emp';
            } else {
                location.href = '/';
            }
        }

        const openTab = (evt, tabName) => {
            // Hide all tab contents
            let tabContents = document.getElementsByClassName("tabcontent");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].style.display = "none";
            }

            // Remove active class from all tab links
            let tabLinks = document.getElementsByClassName("tablinks");
            for (let i = 0; i < tabLinks.length; i++) {
                tabLinks[i].className = tabLinks[i].className.replace(" active", "");
            }

            // Show the current tab and add an "active" class to the link
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        
    </script>
    <style>
        select[readonly] {
            background-color: #ddd;
            pointer-events: none;
        }
         /* Style the tab */
        .tab {
            overflow: hidden;
            border-bottom: 1px solid #ccc;
        }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
        }

        /* Change background color of buttons on hover */
        .tab button:hover {
            background-color: #ddd;
        }

        /* Create an active/current tablink class */
        .tab button.active {
            background-color: #ccc;
        }

        /* Style the tab content */
        .tabcontent {
            display: none;
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-top: none;
        }

        select[readonly] {
            background-color: #ddd;
            pointer-events: none;
        }
    </style>
</head>

<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-12">
                <h3 class="font_b24 m_b2">문서 작성폼</h3>
                <!-- Tab 링크들 -->
                <div class="tab">
                    <button class="tablinks btn btn-outline-primary" onclick="openTab(event, 'report')" id="defaultOpen">보고서</button>
                    <button class="tablinks btn btn-outline-primary" onclick="openTab(event, 'vacation')">휴가 신청서</button>
                    <button class="tablinks btn btn-outline-primary" onclick="openTab(event, 'meeting')">회의록</button>
                </div>
            </div>
        </div>

        <!-- Tab 보고서 양식 시작 -->
        <div id="report" class="tabcontent">
            <h3 class="mt-3">보고서 작성 양식</h3>
            <form action="/auth/docx/addreport" method="post">
                <div class="mb-3">
                    <label for="title" class="form-label">작성글제목</label>
                    <input type="text" class="form-control" id="title" name="title">
                </div>
                <div class="mb-3">
                    <label for="writer" class="form-label">작성자</label>
                    <input type="text" class="form-control" id="writer" name="writer" th:value="${session.loginId}" readonly>
                </div>
                <div class="mb-3">
                    <label for="enddt" class="form-label">기한</label>
                    <input type="date" class="form-control" id="enddt" name="enddt">
                </div>
                <div class="mb-3">
                    <label for="taskplan" class="form-label">업무계획</label>
                    <textarea class="form-control" id="taskplan" name="taskplan" rows="4"></textarea>
                </div>
                <div class="mb-3">
                    <label for="taskprocs" class="form-label">업무진행과정</label>
                    <textarea class="form-control" id="exampleFormControlTextarea1" name="taskprocs" rows="4"></textarea>
                </div>
                <div class="mb-3">
                    <label for="senior" class="form-label">결제권한</label>
                    <select class="form-select" id="senior" name="senior" multiple>
                        <option th:each="m : ${mlist}" th:value="${m.userid.id}" th:text="${m.userid.usernm + ' / ' + m.joblvid}"></option>
                    </select>
                </div>
                <select style="display: none;" name="status" onFocus="this.initialSelect = this.selectedIndex;" onChange="this.selectedIndex = this.initialSelect;" readonly>
                    <option value="1" selected>미승인</option>
                    <option value="2">승인</option>
                    <option value="3">보류</option>
                </select>
                <input type="hidden" name="formtype" value="보고서">
                <button type="submit" class="btn btn-primary">등록</button>
            </form>
        </div>

        <!-- 휴가서 작성 양식 -->
        <div id="vacation" class="tabcontent">
            <h3 class="mt-3">휴가 신청서 작성폼</h3>
            <form action="/auth/docx/addvacation" method="post">
                <div class="mb-3">
                    <label for="title" class="form-label">작성글제목</label>
                    <input type="text" class="form-control" id="title" name="title">
                </div>
                <div class="mb-3">
                    <label for="writer" class="form-label">작성자</label>
                    <input type="text" class="form-control" id="writer" name="writer" th:value="${session.loginId}" readonly>
                </div>
                <div class="mb-3">
                    <label for="enddt" class="form-label">종료일</label>
                    <input type="date" class="form-control" id="enddt" name="enddt">
                </div>
                <div class="mb-3">
                    <label for="dayoffclasf" class="form-label">휴가구분</label>
                    <select class="form-select" id="dayoffclasf" name="dayoffclasf">
                        <option value="연차">연차</option>
                        <option value="병가">병가</option>
                        <option value="기타">기타</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="note" class="form-label">비고</label>
                    <textarea class="form-control" id="note" name="note" rows="4"></textarea>
                </div>
                <div class="mb-3">
                    <label for="senior" class="form-label">결제권한</label>
                    <select class="form-select" id="senior" name="senior" multiple>
                        <option th:each="m : ${mlist}" th:value="${m.userid.id}" th:text="${m.userid.usernm + ' / ' + m.joblvid}"></option>
                    </select>
                </div>
                <select style="display: none;" name="status" onFocus="this.initialSelect = this.selectedIndex;" onChange="this.selectedIndex = this.initialSelect;" readonly>
                    <option value="1" selected>미승인</option>
                    <option value="2">승인</option>
                    <option value="3">보류</option>
                </select>
                <input type="hidden" name="formtype" value="휴가 신청서">
                <button type="submit" class="btn btn-primary">등록</button>
            </form>
        </div>

        <!-- 회의록 작성 양식 -->
        <div id="meeting" class="tabcontent">
            <h3 class="mt-3">회의록 작성폼</h3>
            <form action="/auth/docx/addmeeting" method="post">
                <div class="mb-3">
                    <label for="title" class="form-label">작성글제목</label>
                    <input type="text" class="form-control" id="title" name="title">
                </div>
                <div class="mb-3">
                    <label for="writer" class="form-label">작성자</label>
                    <input type="text" class="form-control" id="writer" name="writer" th:value="${session.loginId}" readonly>
                </div>
                <div class="mb-3">
                    <label for="startdt" class="form-label">회의일시</label>
                    <input type="datetime-local" class="form-control" id="startdt" name="startdt">
                </div>
                <div class="mb-3">
                    <label for="deptandmeetloc" class="form-label">회의장소</label>
                    <input type="text" class="form-control" id="deptandmeetloc" name="deptandmeetloc">
                </div>
                <div class="mb-3">
                    <label for="participant" class="form-label">참석자</label>
                    <textarea class="form-control" id="participant" name="participant" rows="4"></textarea>
                </div>
                <div class="mb-3">
                    <label for="taskprocsres" class="form-label">회의내용</label>
                    <textarea class="form-control" id="taskprocsres" name="taskprocsres" rows="4"></textarea>
                </div>
                <div class="mb-3">
                    <label for="senior" class="form-label">결제권한</label>
                    <select class="form-select" id="senior" name="senior" multiple>
                        <option th:each="m : ${mlist}" th:value="${m.userid.id}" th:text="${m.userid.usernm + ' / ' + m.joblvid}"></option>
                    </select>
                </div>
                <select style="display: none;" name="status" onFocus="this.initialSelect = this.selectedIndex;" onChange="this.selectedIndex = this.initialSelect;" readonly>
                    <option value="1" selected>미승인</option>
                    <option value="2">승인</option>
                    <option value="3">보류</option>
                </select>
                <input type="hidden" name="formtype" value="회의록">
                <button type="submit" class="btn btn-primary">등록</button>
            </form>
        </div>
        <script>
            document.getElementById("defaultOpen").click();
        </script>
        <div class="mt-4">
            <button class="btn btn-secondary" th:onclick="home([[${session.type}]])">홈버튼</button>
            <a href="/auth/docx/list" class="btn btn-secondary">리스트 페이지</a>
        </div>
    </div>
</body>

</html>